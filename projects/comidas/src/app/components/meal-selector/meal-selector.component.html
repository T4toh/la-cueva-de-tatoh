<div class="selector-container">
  <h1>Seleccionar {{ type }} para el {{ dayName }}</h1>

  <div class="actions">
    <button class="btn-back" routerLink="/" type="button">
      Volver sin cambios
    </button>
    <button class="btn-clear" type="button" (click)="clearSelection()">
      Borrar y dejar vac√≠o
    </button>
  </div>

  @if (uniqueTags().length > 0) {
    <div class="filters">
      <button type="button" [class.active]="selectedTag() === null" (click)="selectTag(null)">Todos</button>
      @for (tag of uniqueTags(); track tag) {
        <button type="button" [class.active]="selectedTag() === tag" (click)="selectTag(tag)">{{ tag }}</button>
      }
    </div>
  }

  <div class="grid">
    @for (meal of filteredMeals(); track meal.id) {
      <app-meal-card
        [meal]="meal"
        [showDuplicate]="true"
        [showEdit]="true"
        (cardClick)="selectMeal(meal.id)"
        (duplicate)="duplicateMeal($event)"
        (edit)="editMeal($event)"
      />
    } @empty {
      <p class="empty-state">
        No hay comidas creadas.
        <a routerLink="/meals/new">Crear una nueva</a>
      </p>
    }
  </div>
</div>

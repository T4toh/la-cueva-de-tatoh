<div
  class="meal-card"
  role="button"
  tabindex="0"
  (click)="onCardClick()"
  (keydown.enter)="onCardClick()"
  (keydown.space)="$event.preventDefault(); onCardClick()"
>
  <lib-panel
    [colorFondo]="'var(--color-2)'"
    [colorTexto]="'white'"
    [sombreado]="true"
    [texto]="meal().name"
  >
    <div class="meal-content-wrapper">
      <div class="meal-info">
        <ul class="ingredient-list">
          @for (ing of meal().ingredients; track ing.name) {
            <li>{{ ing.name }} ({{ ing.quantity }})</li>
          } @empty {
            <li>Sin ingredientes</li>
          }
        </ul>
        @if (meal().description) {
          <p class="description">{{ meal().description }}</p>
        }
        
        @if (meal().tags && meal().tags!.length > 0) {
          <div class="tags-list">
             @for (tag of meal().tags; track tag) {
                <lib-tag style="transform: scale(0.9)" [colorFondo]="'var(--color-3)'" [texto]="tag" />
             }
          </div>
        }
      </div>

      @if (showEdit() || showDelete() || showDuplicate()) {
        <div class="card-footer">
          @if (showDuplicate()) {
            <button
              class="btn-icon"
              title="Duplicar"
              type="button"
              (click)="onDuplicate($event)"
            >
              üìë
            </button>
          }
          @if (showEdit()) {
            <button
              class="btn-icon"
              title="Editar"
              type="button"
              (click)="onEdit($event)"
            >
              ‚úèÔ∏è
            </button>
          }
          @if (showDelete()) {
            <button
              class="btn-icon btn-delete"
              title="Eliminar"
              type="button"
              (click)="onDelete($event)"
            >
              üóëÔ∏è
            </button>
          }
        </div>
      }
    </div>
  </lib-panel>
</div>

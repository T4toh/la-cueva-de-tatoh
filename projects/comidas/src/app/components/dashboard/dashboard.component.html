<div class="dashboard-container">
  <div class="week-controls">
    <button (click)="mealService.previousWeek()" class="btn-nav">&lt;</button>
    <div class="week-info">
      <h1>Plan Semanal</h1>
      <span class="date-range">{{ mealService.weekRangeDisplay() }}</span>
    </div>
    <button (click)="mealService.nextWeek()" class="btn-nav">&gt;</button>
  </div>
  
  <div class="actions-top">
    <button (click)="mealService.goToCurrentWeek()" class="btn-secondary">Hoy</button>
    <button (click)="mealService.copyFromPreviousWeek()" class="btn-secondary">Copiar semana anterior</button>
  </div>

  <div class="schedule-grid">
    @for (day of mealService.schedule(); track day.dayName) {
      <lib-panel 
        [texto]="day.dayName + (isToday(day.dayName) ? ' (Hoy)' : '')" 
        [colorFondo]="isToday(day.dayName) ? 'var(--color-2)' : 'var(--color-3)'"
        [colorTexto]="'white'"
        [sombreado]="true"
        [class.is-today]="isToday(day.dayName)"
        [class.is-past]="isPast(day.dayName)"
        class="day-panel"
      >
        <div class="meal-slots">
          <div class="slot">
            <span class="label">Almuerzo:</span>
            <a [routerLink]="['/schedule', day.dayName, 'almuerzo']" class="meal-link">
              {{ getMealName(day.almuerzo) }}
            </a>
          </div>
          <div class="slot">
            <span class="label">Desayuno:</span>
            <a [routerLink]="['/schedule', day.dayName, 'desayuno']" class="meal-link">
              {{ getMealName(day.desayuno) }}
            </a>
          </div>
        </div>
      </lib-panel>
    }
  </div>

  <div class="actions">
    <button (click)="mealService.clearSchedule()" class="btn-clear">Limpiar Semana</button>
  </div>
</div>
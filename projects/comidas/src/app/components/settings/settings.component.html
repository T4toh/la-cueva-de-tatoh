<div class="settings-container">
  <h1>Configuraci贸n</h1>

  <!-- Auth Panel -->
  <lib-panel
    [colorFondo]="'var(--color-1)'"
    [colorTexto]="'white'"
    [sombreado]="true"
    [texto]="'Sincronizaci贸n en la Nube'"
  >
    @if (authService.user$ | async; as user) {
      <div class="settings-content">
        <div class="actions">
          <p>Conectado como: <strong>{{ user.email }}</strong></p>
          <p class="info-text">Tus datos se sincronizan autom谩ticamente.</p>
          <button class="btn-secondary" type="button" (click)="refreshData()">
             Forzar Sincronizaci贸n
          </button>
          <button class="btn-danger" type="button" (click)="authService.logout()">
            Cerrar Sesi贸n
          </button>
        </div>
      </div>
    } @else {
      <div class="settings-content">
        <div class="actions">
          <p>Inicia sesi贸n con Google para guardar y sincronizar tus comidas en la nube de forma gratuita.</p>
          <button class="btn-google" type="button" (click)="authService.loginWithGoogle()">
            Iniciar sesi贸n con Google
          </button>
        </div>
      </div>
    }
  </lib-panel>

  <lib-panel 
    [colorFondo]="'var(--color-3)'" 
    [colorTexto]="'white'"
    [sombreado]="true"
    [texto]="'Gesti贸n de Datos Local'"
  >
    <div class="settings-content">
      <p>Exporta tus comidas y planificaci贸n para usarlas en otro dispositivo o guardarlas como copia de seguridad.</p>
      
      <div class="actions">
        <button class="btn-primary" type="button" (click)="mealService.exportData()">
           Exportar JSON
        </button>
        
        <label class="btn-secondary">
           Importar JSON
          <input accept=".json" style="display: none;" type="file" (change)="onFileSelected($event)">
        </label>
      </div>
    </div>
  </lib-panel>

  <div class="version">
    <p>Comidas v1.2.0</p>
  </div>
</div>
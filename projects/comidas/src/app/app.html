<div class="app-container">
  <nav class="main-nav">
    <a routerLink="/" routerLinkActive="active" title="Plan Semanal" [routerLinkActiveOptions]="{exact: true}">
      <span class="icon">ğŸ“…</span>
      <span class="text">Plan</span>
    </a>
    <a routerLink="/meals" routerLinkActive="active" title="Mis Comidas">
      <span class="icon">ğŸ²</span>
      <span class="text">Comidas</span>
    </a>
    <a routerLink="/shopping-list" routerLinkActive="active" title="Lista de Compras">
      <span class="icon">ğŸ›’</span>
      <span class="text">Compras</span>
    </a>
    
    <!-- Auth & Config Logic -->
    <ng-container *ngIf="authService.user$ | async as user; else guestNav">
      <!-- Logged in: Avatar replaces the config button -->
      <a routerLink="/settings" routerLinkActive="active" title="ConfiguraciÃ³n" class="auth-link">
        <img [src]="user.photoURL" alt="User" class="user-avatar" referrerpolicy="no-referrer">
        <span class="text">Config</span>
      </a>
    </ng-container>

    <ng-template #guestNav>
      <!-- Guest: Standard config button + login button -->
      <a routerLink="/settings" routerLinkActive="active" title="ConfiguraciÃ³n">
        <span class="icon">âš™ï¸</span>
        <span class="text">Config</span>
      </a>
      <a (click)="login()" title="Iniciar SesiÃ³n" class="auth-link clickable">
        <span class="icon">ğŸ‘¤</span>
        <span class="text">Entrar</span>
      </a>
    </ng-template>

  </nav>

  <main>
    <router-outlet />
  </main>
</div>
